<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>常用函数 | 闪阳的web之旅</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="正如伟大的首位图灵奖获得者Alan Perlis曾经说的:用100个函数操作一个数据结构，比用10个函数操作10个数据结构要好。

用较低级别的函数来逐步定义和使用离散功能。一串函数链一个接一个地调用，每一个函数将逐渐转变的结果传递到后一个函数，最后得到解决方案。
123456789101112131415161718192021222324252627282930313233343536373">
<meta property="og:type" content="article">
<meta property="og:title" content="常用函数">
<meta property="og:url" content="http://yoursite.com/2016/10/20/JavaScript/functional programming/useful/index.html">
<meta property="og:site_name" content="闪阳的web之旅">
<meta property="og:description" content="正如伟大的首位图灵奖获得者Alan Perlis曾经说的:用100个函数操作一个数据结构，比用10个函数操作10个数据结构要好。

用较低级别的函数来逐步定义和使用离散功能。一串函数链一个接一个地调用，每一个函数将逐渐转变的结果传递到后一个函数，最后得到解决方案。
123456789101112131415161718192021222324252627282930313233343536373">
<meta property="og:updated_time" content="2016-10-20T08:08:44.273Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="常用函数">
<meta name="twitter:description" content="正如伟大的首位图灵奖获得者Alan Perlis曾经说的:用100个函数操作一个数据结构，比用10个函数操作10个数据结构要好。

用较低级别的函数来逐步定义和使用离散功能。一串函数链一个接一个地调用，每一个函数将逐渐转变的结果传递到后一个函数，最后得到解决方案。
123456789101112131415161718192021222324252627282930313233343536373">
  
    <link rel="alternate" href="/atom.xml" title="闪阳的web之旅" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">闪阳的web之旅</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">科技并不仅限于计算机，任何可以使事情更易完成的方法都是科技。</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-JavaScript/functional programming/useful" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/20/JavaScript/functional programming/useful/" class="article-date">
  <time datetime="2016-10-20T08:08:44.271Z" itemprop="datePublished">2016-10-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Underscore/">Underscore</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      常用函数
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p><em>正如伟大的首位图灵奖获得者Alan Perlis曾经说的:</em><br>用100个函数操作一个数据结构，比用10个函数操作10个数据结构要好。</p>
</blockquote>
<p>用较低级别的函数来逐步定义和使用离散功能。一串函数链一个接一个地调用，每一个函数将逐渐转变的结果传递到后一个函数，最后得到解决方案。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params">thing</span>)</span>&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(thing);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">warn</span>(<span class="params">thing</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log([<span class="string">"WARNING:"</span>, thing].join(<span class="string">' '</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">note</span>(<span class="params">thing</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log([<span class="string">"NOTE:"</span>, thing].join(<span class="string">' '</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isIndexed</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.isArray(data) || _.isString(data);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">nth</span>(<span class="params">a, index</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(!_.isNumber(index)) fail(<span class="string">"Expected a number as the index"</span>);</div><div class="line">    <span class="keyword">if</span>(!isIndexed(a)) fail(<span class="string">"Not supported on non-indexed type"</span>);</div><div class="line">    <span class="keyword">if</span>((index &lt; <span class="number">0</span>) || (index &gt; a.length - <span class="number">1</span>)) fail(<span class="string">"Index value is out of bounds"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> a[index];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> letters = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>];</div><div class="line">nth(letters, <span class="number">1</span>);</div><div class="line"><span class="comment">//=&gt; "b"</span></div><div class="line">nth(<span class="string">"abc"</span>, <span class="number">0</span>)</div><div class="line"><span class="comment">//=&gt; "a"</span></div><div class="line">nth(&#123;&#125;, <span class="number">0</span>)</div><div class="line"><span class="comment">//=&gt; Not supported on non-indexed type</span></div><div class="line">nth(letters, <span class="number">1000</span>)</div><div class="line"><span class="comment">//=&gt; Index value is out of bounds</span></div><div class="line">nth(letters, <span class="string">'aaa'</span>)</div><div class="line"><span class="comment">//=&gt; Expected a number as the index</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> nth(a, <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line">second([<span class="string">'a'</span>,<span class="string">'b'</span>])</div><div class="line"><span class="comment">//=&gt; b</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">lameCSV</span>(<span class="params">str</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.reduce(str.split(<span class="string">"\n"</span>),<span class="function"><span class="keyword">function</span>(<span class="params">table, row</span>) </span>&#123;</div><div class="line">        table.push(_.map(row.split(<span class="string">','</span>),<span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> c.trim();</div><div class="line">        &#125;));</div><div class="line">        <span class="keyword">return</span> table;</div><div class="line">    &#125;, []);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectNames</span>(<span class="params">table</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.rest(_.map(table, _.first))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectAges</span>(<span class="params">table</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.rest(_.map(table, second));</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectHairColor</span>(<span class="params">table</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.rest(_.map(table, <span class="function"><span class="keyword">function</span>(<span class="params">row</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> nth(row, <span class="number">2</span>);</div><div class="line">    &#125;));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> peopleTable = lameCSV(<span class="string">"name,age,hair\nMerble,35,red\nBob,64,blonde"</span>);</div><div class="line"><span class="comment">//=&gt; [["name","age","hair"],["Merble","35","red"],["Bob","64","blonde"]]</span></div><div class="line">selectNames(peopleTable);</div><div class="line"><span class="comment">//=&gt; ["Merble", "Bob"]</span></div><div class="line">selectAges(peopleTable);</div><div class="line"><span class="comment">//=&gt; ["35", "64"]</span></div><div class="line">selectHairColor(peopleTable);</div><div class="line"><span class="comment">//=&gt; ["red", "blonde"]</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> mergeResults = _.zip;</div><div class="line">mergeResults(selectNames(peopleTable), selectAges(peopleTable));</div><div class="line"><span class="comment">//=&gt; [[Merble","35"],["Bob","64"]]</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">existy</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> x != <span class="literal">null</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">truthy</span>(<span class="params">x</span>)</span>&#123; <span class="keyword">return</span> (x != <span class="literal">false</span>) &amp;&amp; existy(x)&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doWhen</span>(<span class="params">cond, action</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(truthy(cond))&#123;</div><div class="line">        <span class="keyword">return</span> action();</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">undefined</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">executeIfHasField</span>(<span class="params">target, name</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> doWhen(existy(target[name]),<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> result = _.result(target, name);</div><div class="line">        <span class="built_in">console</span>.log(result);</div><div class="line">        <span class="built_in">console</span>.log([<span class="string">'The result is'</span>, result].join(<span class="string">' '</span>));</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">executeIfHasField([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="string">'reverse'</span>);</div><div class="line"><span class="comment">//=&gt; [3, 2, 1]</span></div><div class="line">executeIfHasField(&#123;foo: <span class="number">42</span>&#125;, <span class="string">'foo'</span>);</div><div class="line"><span class="comment">//=&gt; 42</span></div><div class="line">executeIfHasField([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="string">'notHere'</span>);</div><div class="line"><span class="comment">//=&gt; undefined</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">allOf</span>(<span class="params"><span class="comment">/* funs */</span></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.reduceRight(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span>(<span class="params">truth, f</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> truth &amp;&amp; f();</div><div class="line">    &#125;,<span class="literal">true</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">anyOf</span>(<span class="params"><span class="comment">/* funs */</span></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.reduceRight(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span>(<span class="params">truth, f</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> truth || f();</div><div class="line">    &#125;,<span class="literal">false</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">T</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line">allOf(T,T);</div><div class="line"><span class="comment">// =&gt;true</span></div><div class="line">anyOf(F,F,T,F);</div><div class="line"><span class="comment">// =&gt;true</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cat</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> head = _.first(<span class="built_in">arguments</span>);</div><div class="line">    <span class="keyword">if</span>(existy(head))&#123;</div><div class="line">        <span class="keyword">return</span> head.concat.apply(head, _.rest(<span class="built_in">arguments</span>));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">construct</span>(<span class="params">head, tail</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> cat([head], _.toArray(tail))</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapcat</span>(<span class="params">fun, coll</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> cat.apply(<span class="literal">null</span>, _.map(coll, fun));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">butlast</span>(<span class="params">coll</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.toArray(coll).slice(<span class="number">0</span>, <span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//平铺元素</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">interpose</span>(<span class="params">inter, coll</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> butlast(mapcat(<span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> construct(element, [inter])</div><div class="line">    &#125;,coll))</div><div class="line">&#125;</div><div class="line">interpose(<span class="string">","</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</div><div class="line"><span class="comment">//=&gt; [1, ",", 2, ",", 3, ",", 4]</span></div><div class="line"><span class="keyword">var</span> library = [&#123;title: <span class="string">"SICP"</span>, isbn: <span class="string">"0262010771"</span>, ed: <span class="number">1</span>&#125;, &#123;title: <span class="string">"SICP"</span>, isbn: <span class="string">"0262510871"</span>, ed: <span class="number">2</span>&#125;, &#123;title: <span class="string">"Joy of Clojure"</span>, isbn: <span class="string">"1935182641"</span>, ed: <span class="number">1</span>&#125;];</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">project</span>(<span class="params">table, keys</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.map(table, <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> _.pick.apply(<span class="literal">null</span>, construct(obj, keys));</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"><span class="comment">//获取表特定的属性</span></div><div class="line"><span class="keyword">var</span> res = project(library,[ <span class="string">"title"</span>,<span class="string">"isbn"</span>]);</div><div class="line"><span class="comment">//=&gt; &#123;title: "SICP", isbn: "0262010771"&#125;, &#123;title: "SICP", isbn: "0262510871"&#125;, &#123;title: "Joy of Clojure", isbn: "1935182641"&#125;]</span></div><div class="line">_.pluck(res,<span class="string">"title"</span>);</div><div class="line"><span class="comment">//=&gt; ["SICP", "SICP", "Joy of Clojure"]</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//更改对象的键名(和sql里的 as 类似 SELECT ed AS edition FROM library)</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">rename</span>(<span class="params">obj, newNames</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.reduce(newNames, <span class="function"><span class="keyword">function</span>(<span class="params">o, nu, old</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(_.has(obj, old))&#123;</div><div class="line">            o[nu] = obj[old];</div><div class="line">            <span class="keyword">return</span> o;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> o;</div><div class="line">        &#125;</div><div class="line">    &#125;,_.omit.apply(<span class="literal">null</span>, construct(obj, _.keys(newNames))))</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj = &#123;a: <span class="number">1</span>, b: <span class="number">2</span>&#125;;</div><div class="line"><span class="keyword">var</span> newNames = &#123;a: <span class="string">"AAA"</span>, b: <span class="string">"BBB"</span>&#125;;</div><div class="line"></div><div class="line">rename(obj,newNames);</div><div class="line"><span class="comment">//=&gt; &#123;AAA: 1, BBB: 2&#125;</span></div><div class="line"></div><div class="line"><span class="comment">//遍历对象数组</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">as</span>(<span class="params">table, newNames</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.map(table, <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> rename(obj, newNames);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">as</span>(library, &#123;isbn:<span class="string">"ISBN"</span>&#125;);</div><div class="line"><span class="comment">//=&gt; [&#123;title: "SICP", ISBN: "0262010771", ed: 1&#125;, &#123;title: "SICP", ISBN: "0262510871", ed: 2&#125;, &#123;title: "Joy of Clojure", ISBN: "1935182641", ed: 1&#125;]</span></div><div class="line">project(<span class="keyword">as</span>(library, &#123;isbn:<span class="string">"ISBN"</span>&#125;),[<span class="string">"ISBN"</span>])</div><div class="line"><span class="comment">//=&gt; [&#123;ISBN: "0262010771"&#125;, &#123;ISBN: "0262510871"&#125;, &#123;ISBN: "1935182641"&#125;]</span></div></pre></td></tr></table></figure>
<h5 id="函数作用域"><a href="#函数作用域" class="headerlink" title="函数作用域"></a>函数作用域</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">strangerIdentity</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">this</span>[<span class="string">'i'</span>] = <span class="number">0</span>; <span class="keyword">this</span>[<span class="string">'i'</span>]&lt;n; <span class="keyword">this</span>[<span class="string">'i'</span>]++);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[<span class="string">'i'</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">strangerIdentity(<span class="number">108</span>);</div><div class="line"><span class="comment">//=&gt; 108</span></div><div class="line">i;</div><div class="line"><span class="comment">//=&gt; 108</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>[<span class="string">'a'</span>] = <span class="number">200</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[<span class="string">'a'</span>] + <span class="keyword">this</span>[<span class="string">'b'</span>];</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> globals = &#123;<span class="string">'b'</span>: <span class="number">2</span>&#125;;</div><div class="line">f.call(_.clone(globals));</div><div class="line">globals;</div><div class="line"><span class="comment">//=&gt; &#123;'b': 2&#125;</span></div><div class="line">a;</div><div class="line"><span class="comment">//=&gt; ReferenceError</span></div><div class="line">b;</div><div class="line"><span class="comment">//=&gt; ReferenceError</span></div></pre></td></tr></table></figure>
<h5 id="模拟闭包"><a href="#模拟闭包" class="headerlink" title="模拟闭包"></a>模拟闭包</h5><p>在经历了30年，闭包终于成为主流的变成语言的主要特点。<br>闭包犹如编程语言中的吸血鬼，他们捕获部下并给其永久的生命，知道自己被摧毁。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//局部变量</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">whatWasTheLocal</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> CAPTURED = <span class="string">'Oh hai'</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"The local was:"</span> + CAPTURED;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> reportLocal = whatWasTheLocal();</div><div class="line">reportLocal();</div><div class="line"><span class="comment">//=&gt; The local was:Oh hai</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//函数参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createScaleFunction</span>(<span class="params">FACTOR</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> _.map(v,<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> (n*FACTOR);</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> scale10 = createScaleFunction(<span class="number">10</span>);</div><div class="line">scale10([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</div><div class="line"><span class="comment">//=&gt; [10, 20, 30]</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">captureShadow</span>(<span class="params">shadowed</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">shadowed</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> shadowed + <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> closureShadow = captureShadow(<span class="number">108</span>);</div><div class="line">closureShadow(<span class="number">2</span>);</div><div class="line"><span class="comment">//=&gt; 3</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showObject</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(obj);</div><div class="line">        <span class="keyword">return</span> obj;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o = &#123;a: <span class="number">42</span>&#125;;</div><div class="line"><span class="keyword">var</span> showO = showObject(o);</div><div class="line">showO();</div><div class="line"><span class="comment">//=&gt; &#123;a: 42&#125;</span></div><div class="line">o.xiao = <span class="string">"a"</span></div><div class="line">showO();</div><div class="line"><span class="comment">//=&gt; &#123;a: 42, xiao: "a"&#125;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//通过这种闭包模式提供访问保护是一个强大的技术，能使JavaScript程序员在应对软件复杂性时保持头脑清楚</span></div><div class="line"><span class="keyword">var</span> pingpong = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> private = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        inc: <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> private += n;</div><div class="line">        &#125;,</div><div class="line">        dec: <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> private -= n;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)()</div><div class="line">pingpong.inc(<span class="number">10</span>);</div><div class="line"><span class="comment">//=&gt; 10</span></div><div class="line">pingpong.dec(<span class="number">7</span>);</div><div class="line"><span class="comment">//=&gt; 3</span></div><div class="line"></div><div class="line">pingpong.div = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="keyword">return</span> private/n &#125;;</div><div class="line">pingpong.div(<span class="number">3</span>);</div><div class="line"><span class="comment">//=&gt; ReferenceError: private is not defined</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//闭包的抽象</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">plucker</span>(<span class="params">field</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> (obj &amp;&amp; obj[field]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> best = &#123;title: <span class="string">"Infinite Jest"</span>, author: <span class="string">"DFW"</span>&#125;;</div><div class="line"><span class="keyword">var</span> getTitle = plucker(<span class="string">"title"</span>);</div><div class="line">getTitle(best);</div><div class="line"><span class="comment">//=&gt; Infinite Jest</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> books = [&#123;title: <span class="string">"Chthon"</span>&#125;, &#123;stars: <span class="number">5</span>&#125;, &#123;title: <span class="string">"Botchan"</span>&#125;];</div><div class="line"><span class="keyword">var</span> third = plucker(<span class="number">2</span>);</div><div class="line">third(books);</div><div class="line"><span class="comment">//=&gt; &#123;title: "Botchan"&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> library = [&#123;title: <span class="string">"SICP"</span>, isbn: <span class="string">"0262010771"</span>, ed: <span class="number">1</span>&#125;, &#123;title: <span class="string">"SICP"</span>, isbn: <span class="string">"0262510871"</span>, ed: <span class="number">2</span>&#125;, &#123;title: <span class="string">"Joy of Clojure"</span>, isbn: <span class="string">"1935182641"</span>, ed: <span class="number">1</span>&#125;];</div><div class="line">_.map(library, getTitle);</div><div class="line"><span class="comment">//=&gt; ["SICP", "SICP", "Joy of Clojure"]</span></div></pre></td></tr></table></figure>
<h5 id="以其他函数为参数的函数"><a href="#以其他函数为参数的函数" class="headerlink" title="以其他函数为参数的函数"></a>以其他函数为参数的函数</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeatedly</span>(<span class="params">times, fun</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.map(_.range(times), fun);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> arr = repeatedly(<span class="number">3</span>, <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.floor((<span class="built_in">Math</span>.random()*<span class="number">10</span>))+<span class="number">1</span>;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">iterateUntil</span>(<span class="params">fun, check, init</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> ret = [];</div><div class="line">    <span class="keyword">var</span> result = fun(init);</div><div class="line"></div><div class="line">    <span class="keyword">while</span>(check(result))&#123;</div><div class="line">        ret.push(result);</div><div class="line">        result = fun(result);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> ret;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line">iterateUntil(<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="keyword">return</span> n+n &#125;,</div><div class="line">             <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123; <span class="keyword">return</span> n&lt;= <span class="number">1024</span>&#125;,</div><div class="line">             <span class="number">1</span>);</div><div class="line"><span class="comment">//=&gt; [2, 4, 8, 16, 32, 64, 128, 256, 512, 1024]</span></div></pre></td></tr></table></figure>
<h5 id="高价函数"><a href="#高价函数" class="headerlink" title="高价函数"></a>高价函数</h5><p>解释闭包的关键点</p>
<ol>
<li>闭包会捕获一个值</li>
<li>每一个新的闭包都会捕获不一样的值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//虽然直接对一个实例执行特定方法是完全合法的，</span></div><div class="line"><span class="comment">// 但函数式的风格更倾向于将调用对象作为参数。</span></div><div class="line"><span class="comment">// invoker会在一个对象不包含给定方法时返回undefined,</span></div><div class="line"><span class="comment">// 这样可以使用JavaScript天然的多态性构建多态函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">invoker</span>(<span class="params">name, method</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target <span class="comment">/* args */</span></span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(!existy(target)) fail(<span class="string">"Must provide a target"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> targetMethod = target[name];</div><div class="line">        <span class="keyword">var</span> args = _.rest(<span class="built_in">arguments</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> doWhen(existy(targetMethod) &amp;&amp; method === targetMethod,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> targetMethod.apply(target, args);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeUniqueStringFunction</span>(<span class="params">start</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> counter = start;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">prefix</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> [prefix, counter++].join(<span class="string">''</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> uniqueString = makeUniqueStringFunction(<span class="number">0</span>);</div><div class="line">uniqueString(<span class="string">"dari"</span>);</div><div class="line"><span class="comment">//=&gt; "dari0"</span></div><div class="line">uniqueString(<span class="string">"dars"</span>);</div><div class="line"><span class="comment">//=&gt; "dari1"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> omgenerator = (<span class="function"><span class="keyword">function</span>(<span class="params">init</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> counter = init;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        uniqueString: <span class="function"><span class="keyword">function</span>(<span class="params">prefix</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> [prefix, counter++].join(<span class="string">''</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;)(<span class="number">0</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(omgenerator.uniqueString(<span class="string">"dars"</span>));</div><div class="line"><span class="comment">//=&gt; dars0</span></div><div class="line"><span class="built_in">console</span>.log(omgenerator.uniqueString(<span class="string">"dars"</span>));</div><div class="line"><span class="comment">//=&gt; dars1</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnull</span>(<span class="params">fun <span class="comment">/*, defaults  */</span></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> defaults = _.rest(<span class="built_in">arguments</span>);</div><div class="line">    <span class="built_in">console</span>.log(defaults);</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"><span class="comment">/* args */</span></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> args = _.first(<span class="built_in">arguments</span>,<span class="number">2</span>);</div><div class="line">        <span class="built_in">console</span>.log(args);</div><div class="line">        args = _.map(args, <span class="function"><span class="keyword">function</span>(<span class="params">e, i</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> existy(e) ? e : defaults[i];</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//console.log(args);</span></div><div class="line">        <span class="keyword">return</span> fun.apply(<span class="literal">null</span>,args);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> safeMult = fnull(<span class="function"><span class="keyword">function</span>(<span class="params">total, n</span>)</span>&#123; <span class="keyword">return</span> total * n &#125;, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">var</span> nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="literal">null</span>,<span class="number">5</span>];</div><div class="line">_.reduce(nums, safeMult);</div><div class="line"><span class="comment">//=&gt; 30</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defaults</span>(<span class="params">d</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">o, k</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> val = fnull(_.identity, d[k]);</div><div class="line">        <span class="keyword">return</span>  o &amp;&amp; val(o[k]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">config</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> lookup = defaults(&#123;critical: <span class="number">108</span>&#125;);</div><div class="line">    <span class="keyword">return</span> lookup(config, <span class="string">'critical'</span>);</div><div class="line">&#125;</div><div class="line">doSomething(&#123;critical: <span class="number">9</span>&#125;);</div><div class="line"><span class="comment">//=&gt; 9</span></div><div class="line">doSomething(&#123;&#125;);</div><div class="line"><span class="comment">//=&gt; 108</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checker</span>(<span class="params"><span class="comment">/* validators */</span></span>)</span>&#123;<span class="comment">//谓词函数</span></div><div class="line">    <span class="keyword">var</span> validators = _.toArray(<span class="built_in">arguments</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> _.reduce(validators, <span class="function"><span class="keyword">function</span>(<span class="params">errs, check</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(check(obj))&#123;</div><div class="line">                <span class="keyword">return</span> errs;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">return</span> _.chain(errs).push(check.message).value();</div><div class="line">            &#125;</div><div class="line">        &#125;,[])</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">validator</span>(<span class="params">message, fun</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> f= <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> fun.apply(fun, <span class="built_in">arguments</span>);</div><div class="line">    &#125;;</div><div class="line">    f[<span class="string">'message'</span>] = message;</div><div class="line">    <span class="keyword">return</span> f;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">aMap</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> _.isObject(obj);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasKeys</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> keys = _.toArray(<span class="built_in">arguments</span>);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> _.every(keys, <span class="function"><span class="keyword">function</span>(<span class="params">k</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> _.has(obj, k);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    fun.message = cat([<span class="string">"Must have values for keys:"</span>],keys).join(<span class="string">" "</span>);</div><div class="line">    <span class="keyword">return</span> fun;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> checkCommand = checker(validator(<span class="string">"must be a map"</span>, aMap));</div><div class="line"><span class="built_in">console</span>.log(checkCommand(&#123;&#125;));</div><div class="line"><span class="comment">//=&gt; []</span></div><div class="line"><span class="built_in">console</span>.log(checkCommand(<span class="number">100</span>));</div><div class="line"><span class="comment">//=&gt; ["must be a map"]</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> checkCommand2 = checker(validator(<span class="string">"must be a map"</span>, aMap), hasKeys(<span class="string">'msg'</span>, <span class="string">'type'</span>));</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(checkCommand2(&#123;msg: <span class="string">"blash"</span>, type: <span class="string">"display"</span>&#125;));</div><div class="line"><span class="comment">//=&gt; []</span></div><div class="line"><span class="built_in">console</span>.log(checkCommand2(<span class="number">32</span>));</div><div class="line"><span class="comment">//=&gt; ["must be a map", "Must have values for keys: msg type"]</span></div><div class="line"><span class="built_in">console</span>.log(checkCommand2(&#123;&#125;));</div><div class="line"><span class="comment">//=&gt; ["Must have values for keys: msg type"]</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//虽然直接对一个实例执行特定方法是完全合法的，</span></div><div class="line"><span class="comment">// 但函数式的风格更倾向于将调用对象作为参数。</span></div><div class="line"><span class="comment">// invoker会在一个对象不包含给定方法时返回undefined,</span></div><div class="line"><span class="comment">// 这样可以使用JavaScript天然的多态性构建多态函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">invoker</span>(<span class="params">name, method</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target <span class="comment">/* args */</span></span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(!existy(target)) fail(<span class="string">"Must provide a target"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> targetMethod = target[name];</div><div class="line">        <span class="keyword">var</span> args = _.rest(<span class="built_in">arguments</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> doWhen(existy(targetMethod) &amp;&amp; method === targetMethod,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> targetMethod.apply(target, args);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params"><span class="comment">/* funs */</span></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> funs = _.toArray(<span class="built_in">arguments</span>);</div><div class="line">    <span class="keyword">var</span> size = funs.length;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target <span class="comment">/*, args */</span></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> ret = <span class="literal">undefined</span>;</div><div class="line">        <span class="keyword">var</span> args = _.rest(_.toArray(<span class="built_in">arguments</span>));</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> funIndex = <span class="number">0</span>; funIndex &lt; size; funIndex++)&#123;</div><div class="line">            <span class="keyword">var</span> fun = funs[funIndex];</div><div class="line">            ret = fun.apply(fun, construct(target, args));</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(existy(ret)) <span class="keyword">return</span> ret;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ret;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> str = dispatch(invoker(<span class="string">'toString'</span>, <span class="built_in">Array</span>.prototype.toString), invoker(<span class="string">'toString'</span>, <span class="built_in">String</span>.prototype.toString));</div><div class="line"></div><div class="line">str(<span class="string">"abc"</span>);</div><div class="line"><span class="comment">//=&gt; abc</span></div><div class="line">str([<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>]);</div><div class="line"><span class="comment">//=&gt; a,b,c</span></div><div class="line">str(&#123;&#125;);</div><div class="line"><span class="comment">//=&gt; undefined</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringReverse</span>(<span class="params">s</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(!_.isString(s)) <span class="keyword">return</span> <span class="literal">undefined</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> s.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> rev = dispatch(invoker(<span class="string">'reverse'</span>, <span class="built_in">Array</span>.prototype.reverse), stringReverse);</div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(rev([<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>]));</div><div class="line"><span class="comment">//= ["c", "b", "a"]</span></div><div class="line"><span class="built_in">console</span>.log(rev(<span class="string">"abc"</span>));</div><div class="line"><span class="comment">//=&gt; cba</span></div><div class="line"><span class="built_in">console</span>.log(rev(&#123;&#125;));</div><div class="line"><span class="comment">//=&gt; undefined</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">always</span>(<span class="params">x</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> _.identity(x);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> sillyReverse = dispatch(rev,always(<span class="number">42</span>));</div><div class="line">sillyReverse([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</div><div class="line"><span class="comment">//=&gt; [3, 2, 1]</span></div><div class="line">sillyReverse(<span class="string">"abc"</span>);</div><div class="line"><span class="comment">//=&gt; "cba"</span></div><div class="line">sillyReverse(<span class="number">1000</span>);</div><div class="line"><span class="comment">//=&gt; 42</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">performCommandHardcoded</span>(<span class="params">command</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> result;</div><div class="line"></div><div class="line">    <span class="keyword">switch</span> (command.type)&#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">'notify'</span>:</div><div class="line">            result = notify(command.message);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> <span class="string">'join'</span>:</div><div class="line">            result = changeView(command.target);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            alert(command.type);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isa</span>(<span class="params">type, action</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(type === obj.type)&#123;</div><div class="line">            <span class="keyword">return</span> action(obj);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> performCommand = dispatch(isa(<span class="string">'notify'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> notify(obj.message);</div><div class="line">&#125;),isa(<span class="string">'join'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> changeView(obj.target);</div><div class="line">&#125;),<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">    alert(obj.type)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">var</span> performAdminCommand = dispatch(isa(<span class="string">'kill'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> shutdown(obj.hostname);</div><div class="line">&#125;),performCommand);</div><div class="line"><span class="keyword">var</span> performTrialUserCommand = dispatch(isa(<span class="string">'join'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">    alert(<span class="string">"Cannot join until approved"</span>);</div><div class="line">&#125;),performCommand);</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/10/20/JavaScript/functional programming/useful/" data-id="ciugro2xd0000wcniob6hqwer" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/function/">function</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/10/22/JavaScript/functional programming/curry/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          柯里化
        
      </div>
    </a>
  
  
    <a href="/2016/10/15/JavaScript/functional programming/First_class_citizen/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title">函数是一等公民</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorieën</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JSON/">JSON</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Underscore/">Underscore</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/animation/">animation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/events/">events</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/events/HTML-DOM-events/">HTML DOM events</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/mobile/">mobile</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/svg/">svg</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Labels</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Animation-performance/">Animation performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Closures/">Closures</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Content-type/">Content-type</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOMContentLoaded/">DOMContentLoaded</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Object-create/">Object.create</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax/">ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation-library/">animation library</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apply/">apply()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/">bind()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/call/">call()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/clone/">clone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concept/">concept</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/config/">config</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curry/">curry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/currying/">currying</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/function/">function</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gesture/">gesture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/library/">library</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/load/">load</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onresize/">onresize</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/performance/">performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/picture-compression/">picture compression</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/polymorphism/">polymorphism</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/position/">position</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prototype/">prototype</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/recursion/">recursion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scroll/">scroll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/setTimeout/">setTimeout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/style/">style</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg/">svg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tap/">tap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transform/">transform</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transition/">transition</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uncurrying/">uncurrying</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Animation-performance/" style="font-size: 10px;">Animation performance</a> <a href="/tags/Array/" style="font-size: 10px;">Array</a> <a href="/tags/Closures/" style="font-size: 13.33px;">Closures</a> <a href="/tags/Content-type/" style="font-size: 10px;">Content-type</a> <a href="/tags/DOMContentLoaded/" style="font-size: 10px;">DOMContentLoaded</a> <a href="/tags/JSON/" style="font-size: 16.67px;">JSON</a> <a href="/tags/Object-create/" style="font-size: 10px;">Object.create</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/animation/" style="font-size: 16.67px;">animation</a> <a href="/tags/animation-library/" style="font-size: 10px;">animation library</a> <a href="/tags/apply/" style="font-size: 13.33px;">apply()</a> <a href="/tags/bind/" style="font-size: 13.33px;">bind()</a> <a href="/tags/call/" style="font-size: 13.33px;">call()</a> <a href="/tags/clone/" style="font-size: 10px;">clone</a> <a href="/tags/concept/" style="font-size: 10px;">concept</a> <a href="/tags/config/" style="font-size: 10px;">config</a> <a href="/tags/curry/" style="font-size: 10px;">curry</a> <a href="/tags/currying/" style="font-size: 10px;">currying</a> <a href="/tags/function/" style="font-size: 20px;">function</a> <a href="/tags/gesture/" style="font-size: 10px;">gesture</a> <a href="/tags/library/" style="font-size: 10px;">library</a> <a href="/tags/load/" style="font-size: 10px;">load</a> <a href="/tags/onresize/" style="font-size: 10px;">onresize</a> <a href="/tags/performance/" style="font-size: 10px;">performance</a> <a href="/tags/picture-compression/" style="font-size: 10px;">picture compression</a> <a href="/tags/polymorphism/" style="font-size: 10px;">polymorphism</a> <a href="/tags/position/" style="font-size: 10px;">position</a> <a href="/tags/prototype/" style="font-size: 10px;">prototype</a> <a href="/tags/recursion/" style="font-size: 10px;">recursion</a> <a href="/tags/scroll/" style="font-size: 10px;">scroll</a> <a href="/tags/setTimeout/" style="font-size: 10px;">setTimeout</a> <a href="/tags/style/" style="font-size: 10px;">style</a> <a href="/tags/svg/" style="font-size: 10px;">svg</a> <a href="/tags/tap/" style="font-size: 10px;">tap</a> <a href="/tags/transform/" style="font-size: 13.33px;">transform</a> <a href="/tags/transition/" style="font-size: 10px;">transition</a> <a href="/tags/uncurrying/" style="font-size: 10px;">uncurrying</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/27/JavaScript/functional programming/purity/">纯度</a>
          </li>
        
          <li>
            <a href="/2016/10/25/JavaScript/functional programming/recursion/">递归</a>
          </li>
        
          <li>
            <a href="/2016/10/24/JavaScript/functional programming/Underscore_node/">Underscore.js笔记</a>
          </li>
        
          <li>
            <a href="/2016/10/22/JavaScript/functional programming/curry/">柯里化</a>
          </li>
        
          <li>
            <a href="/2016/10/20/JavaScript/functional programming/useful/">常用函数</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 shanyang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/1.11.0/jquery.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>